(()=>{"use strict";var e,t={446:(e,t,n)=>{var i,s,a,r,o,l=function(){function e(){}return e.errorHandler=function(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log("Sorry, but there is ".concat(e.status," error: ").concat(e.statusText)),Error(e.statusText);return e},e.prototype.load=function(t,n){fetch(t).then((function(t){return e.errorHandler(t)})).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){return console.error(e)}))},e}(),c=function(){function e(){}return e.buildElement=function(e){var t=document.createElement("template");return t.innerHTML=e,t.content.cloneNode(!0)},e.buildTemplate=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return function(i){return n.reduce((function(n,s,a){return"".concat(n).concat(e.convertToString(i[s])).concat(t[a+1])}),t[0])}},e.convertToString=function(e){return"string"==typeof e?e:e.toString()},e}(),u=c.buildTemplate(i||(r=['\n  <div class="catalog__count">\n    <span class="header-text">Найдено товаров: ',' шт.</span>\n  </div>\n  <div class="catalog__wrapper">\n    ',"\n  </div>"],o=['\n  <div class="catalog__count">\n    <span class="header-text">Найдено товаров: ',' шт.</span>\n  </div>\n  <div class="catalog__wrapper">\n    ',"\n  </div>"],Object.defineProperty?Object.defineProperty(r,"raw",{value:o}):r.raw=o,i=r),"count","cards"),d=c.buildTemplate(s||(s=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(['\n<article class="card">\n  <img class="card__image" src="','" alt="','">\n  \n  <div class="card__content">\n    <div class="card__info">\n    <h3 class="header-text">','</h3>\n    <div class="card__rating rating-','"></div>\n    <ul class="info">\n      <li class="info__list">\n        <span class="text">Производитель</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Цвет</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Тип уборки</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Мощность всасывания</span>\n        <span class="text feature-text">',' Вт</span>\n      </li>\n    </ul>\n  </div>\n  \n  <div class="card__buy">\n    <span class="card__price">',' ₽</span>\n    <div class="card__buttons">\n      <div class="card__buttons-basket '," ",'">\n        <button data-id="','" class="button button_basic basket-remove">&#8722;</button>\n        <span class="basket-count">','</span>\n        <button data-id="','" class="button button_basic basket-add">\n          <span class="basket-add__plus">&#43;</span>\n          <span class="basket-add__text">В корзину</span>\n        </button>\n      </div>\n      <button data-id="','" class="button button_icon button-favorite ','">\n        <svg class="icon-heart" width="24" height="21" viewBox="0 0 24 21" xmlns="http://www.w3.org/2000/svg">\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9994 2.10589C8.47019 -1.24772 3.26381 0.138319 1.35872 3.87584C0.313178 5.92706 0.298896 8.57818 1.84178 11.388C3.37099 14.173 6.41989 17.1125 11.5156 19.929L11.9993 20.1964L12.4831 19.9291C17.579 17.1126 20.6281 14.173 22.1574 11.3881C23.7004 8.57821 23.6861 5.92708 22.6406 3.87584C20.7355 0.138247 15.5289 -1.24767 11.9994 2.10589Z"/>\n        </svg>\n      </button>\n      </div>\n     <span class="text feature-text">В наличии '," шт.</span>\n    </div>\n  </div>\n</article>"],['\n<article class="card">\n  <img class="card__image" src="','" alt="','">\n  \n  <div class="card__content">\n    <div class="card__info">\n    <h3 class="header-text">','</h3>\n    <div class="card__rating rating-','"></div>\n    <ul class="info">\n      <li class="info__list">\n        <span class="text">Производитель</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Цвет</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Тип уборки</span>\n        <span class="text feature-text">','</span>\n      </li>\n      <li class="info__list">\n        <span class="text">Мощность всасывания</span>\n        <span class="text feature-text">',' Вт</span>\n      </li>\n    </ul>\n  </div>\n  \n  <div class="card__buy">\n    <span class="card__price">',' ₽</span>\n    <div class="card__buttons">\n      <div class="card__buttons-basket '," ",'">\n        <button data-id="','" class="button button_basic basket-remove">&#8722;</button>\n        <span class="basket-count">','</span>\n        <button data-id="','" class="button button_basic basket-add">\n          <span class="basket-add__plus">&#43;</span>\n          <span class="basket-add__text">В корзину</span>\n        </button>\n      </div>\n      <button data-id="','" class="button button_icon button-favorite ','">\n        <svg class="icon-heart" width="24" height="21" viewBox="0 0 24 21" xmlns="http://www.w3.org/2000/svg">\n          <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9994 2.10589C8.47019 -1.24772 3.26381 0.138319 1.35872 3.87584C0.313178 5.92706 0.298896 8.57818 1.84178 11.388C3.37099 14.173 6.41989 17.1125 11.5156 19.929L11.9993 20.1964L12.4831 19.9291C17.579 17.1126 20.6281 14.173 22.1574 11.3881C23.7004 8.57821 23.6861 5.92708 22.6406 3.87584C20.7355 0.138247 15.5289 -1.24767 11.9994 2.10589Z"/>\n        </svg>\n      </button>\n      </div>\n     <span class="text feature-text">В наличии '," шт.</span>\n    </div>\n  </div>\n</article>"])),"image","model","model","rating","brand","color","cleaningType","suctionPower","price","buttonClass","disabledClass","id","basketCount","id","id","isFavorite","count");!function(e){e.NameAsc="nameAsc",e.NameDesc="nameDesc",e.PriceAsc="priceAsc",e.PriceDesc="priceDesc",e.Rating="rating"}(a||(a={}));var p,v,h,f,m=function(){function e(){return this.events=new Map,e.instance?e.instance:(e.instance=this,this)}return e.prototype.on=function(e,t){var n;this.events.has(e)||this.events.set(e,[]),null===(n=this.events.get(e))||void 0===n||n.push(t)},e.prototype.removeListener=function(e,t){var n;this.events.has(e)&&this.events.set(e,(null!==(n=this.events.get(e))&&void 0!==n?n:[]).filter((function(e){return e!==t})))},e.prototype.emit=function(e,t){var n;this.events.has(e)&&(null===(n=this.events.get(e))||void 0===n||n.forEach((function(e){return e(t)})))},e}(),b=function(){function e(){return this.active=[],e.instance?e.instance:(e.instance=this,this)}return e.prototype.render=function(e){var t=this;if(!this.active.length){this.active=[e];var n=document.querySelector(".notification"),i=document.querySelector(".notification__text");n.classList.add("notification_active"),i.innerText=this.active[0],setTimeout((function(){n.classList.remove("notification_active"),i.innerText="",t.active=[]}),3e3)}},e}(),_=function(){function e(t){var n=this;return this.eventEmitter=new m,this.notification=new b,this.items=new Map(t||[]),this.render(),this.eventEmitter.on("addToBasket",(function(e){if(Array.from(n.items.values()).reduce((function(e,t){return e+t}),0)<20){if(!e.id||!e.count)return;var t=n.items.get(e.id)||0;e.id&&t<e.count&&(n.add(e.id),n.render())}else n.notification.render("Извините, все слоты заполнены")})),this.eventEmitter.on("removeFromBasket",(function(e){e.id&&(n.remove(e.id),n.render())})),this.eventEmitter.on("reset",(function(){n.items.clear(),n.render()})),e.instance?e.instance:(e.instance=this,this)}return e.prototype.add=function(e){this.items.set(e,(this.items.get(e)||0)+1),localStorage.setItem("basket",JSON.stringify(Array.from(this.items.entries())))},e.prototype.remove=function(e){var t=this.items.get(e);t&&(t<=1?this.items.delete(e):this.items.set(e,t-1),localStorage.setItem("basket",JSON.stringify(Array.from(this.items.entries()))))},e.prototype.render=function(){var e,t=document.querySelector(".menu__basket-count");if(!(null===(e=this.items)||void 0===e?void 0:e.size))return t.innerText="",void t.classList.remove("menu__basket-count_active");t.innerText=Array.from(this.items.values()).reduce((function(e,t){return e+t}),0).toString(),t.classList.add("menu__basket-count_active")},e.prototype.getCountValue=function(e){var t;return(null===(t=this.items)||void 0===t?void 0:t.get(e))||0},e}(),g=function(){function e(e){var t=this;this.eventEmitter=new m,this.favorites=new Set,e&&(this.favorites=new Set(e)),this.render(),this.eventEmitter.on("reset",(function(){t.favorites.clear(),t.render()}))}return e.prototype.isFavorite=function(e){return this.favorites.has(e)},e.prototype.add=function(e){this.favorites.add(e),this.render(),localStorage.setItem("favorite",JSON.stringify(Array.from(this.favorites)))},e.prototype.remove=function(e){this.favorites.delete(e),this.render(),localStorage.setItem("favorite",JSON.stringify(Array.from(this.favorites)))},e.prototype.toggle=function(e){return!!e&&(this.isFavorite(e)?this.remove(e):this.add(e),this.isFavorite(e))},e.prototype.render=function(){var e=document.querySelector(".menu__favorite-count"),t=this.favorites.size;if(!t)return e.innerText="",void e.classList.remove("menu__favorite-count_active");e.innerText=t.toString(),e.classList.add("menu__favorite-count_active")},e}(),x=function(){return x=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},x.apply(this,arguments)},y=function(){function e(e){this.items=[],this.eventEmitter=new m,this.notification=new b;var t=JSON.parse(localStorage.getItem("basket")||"null"),n=JSON.parse(localStorage.getItem("favorite")||"null");this.items=e,this.basket=new _(t),this.favorite=new g(n)}return e.prototype.render=function(e){var t=this;this.eventEmitter.on("filterChange",(function(n){var i=document.querySelector(e),s=t.items.filter((function(e){var t,i,s,a,r,o,l,c,u=new RegExp("".concat(null!==(t=null==n?void 0:n.query)&&void 0!==t?t:""),"gi").test(e.model),d=!(null===(i=n.brand)||void 0===i?void 0:i.length)||n.brand.includes(e.brandId),p=!(null===(s=n.cleaningType)||void 0===s?void 0:s.length)||n.cleaningType.includes(e.cleaningTypeId),v=!(null===(a=n.color)||void 0===a?void 0:a.length)||n.color.includes(e.colorId),h=!n.isPopular||e.isPopular,f=!0,m=!0;return(null===(r=n.price)||void 0===r?void 0:r[0])&&(null===(o=n.price)||void 0===o?void 0:o[1])&&(f=e.price>=n.price[0]&&e.price<=n.price[1]),(null===(l=n.suctionPower)||void 0===l?void 0:l[0])&&(null===(c=n.suctionPower)||void 0===c?void 0:c[1])&&(m=e.suctionPower>=n.suctionPower[0]&&e.suctionPower<=n.suctionPower[1]),u&&d&&p&&v&&f&&m&&h})).sort((function(e,t){return n.sorting===a.NameAsc?e.model<t.model?-1:1:n.sorting===a.NameDesc?e.model>t.model?-1:1:n.sorting===a.PriceAsc?e.price-t.price:n.sorting===a.PriceDesc?t.price-e.price:t.rating-e.rating})),r=c.buildElement(u({count:s.length,cards:s.map((function(e){return d(x(x({},e),{basketCount:t.basket.getCountValue(e.id)||"",isFavorite:t.favorite.isFavorite(e.id)?"favorite-active":"",buttonClass:t.basket.getCountValue(e.id)?"button_expanded":"",disabledClass:t.basket.getCountValue(e.id)===e.count?"disabled-add":""}))})).join("")}));i.innerHTML="",s.length||t.notification.render("Извините, совпадений не обнаружено"),i.append(r),t.addListeners()}))},e.prototype.addListeners=function(){var e=this,t=document.querySelectorAll(".basket-add"),n=document.querySelectorAll(".basket-remove"),i=document.querySelectorAll(".button-favorite");t.forEach((function(t){t.addEventListener("click",(function(){var n,i,s,a=e.items.find((function(e){var n;return e.id===+((null===(n=t.dataset)||void 0===n?void 0:n.id)||-1)})),r=null===(n=t.parentElement)||void 0===n?void 0:n.querySelector(".basket-count");if(a){e.eventEmitter.emit("addToBasket",a);var o=e.basket.getCountValue(a.id);r.innerText=o?o.toString():"",null===(i=t.parentElement)||void 0===i||i.classList.toggle("button_expanded",!!o),null===(s=t.parentElement)||void 0===s||s.classList.toggle("disabled-add",o===a.count)}}))})),n.forEach((function(t){t.addEventListener("click",(function(){var n,i,s,a=e.items.find((function(e){var n;return e.id===+((null===(n=t.dataset)||void 0===n?void 0:n.id)||-1)})),r=null===(n=t.parentElement)||void 0===n?void 0:n.querySelector(".basket-count");if(a){e.eventEmitter.emit("removeFromBasket",a);var o=e.basket.getCountValue(a.id);r.innerText=o?o.toString():"",null===(i=t.parentElement)||void 0===i||i.classList.toggle("button_expanded",!!o),null===(s=t.parentElement)||void 0===s||s.classList.toggle("disabled-add",o===a.count)}}))})),i.forEach((function(t){t.addEventListener("click",(function(){t.classList.toggle("favorite-active",e.favorite.toggle(+(t.dataset.id||0)))}))}))},e}(),k=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},w=c.buildTemplate(p||(p=k(['\n    <div class="checkbox__container">\n      <input class="checkbox__input" type="checkbox" id="','" name="','">\n      <label class="checkbox__label" for="','">',"</label>\n    </div>\n"],['\n    <div class="checkbox__container">\n      <input class="checkbox__input" type="checkbox" id="','" name="','">\n      <label class="checkbox__label" for="','">',"</label>\n    </div>\n"])),"id","id","id","title"),C=c.buildTemplate(v||(v=k(['\n    <div class="checkbox__container">\n      <input class="checkbox__input" type="checkbox" id="','" name="','">\n      <label class="checkbox__label" for="','">\n        <span class="checkbox__color-title">','</span>\n        <span class="checkbox__color" style="background-color:',';"></span>\n      </label>\n    </div>\n'],['\n    <div class="checkbox__container">\n      <input class="checkbox__input" type="checkbox" id="','" name="','">\n      <label class="checkbox__label" for="','">\n        <span class="checkbox__color-title">','</span>\n        <span class="checkbox__color" style="background-color:',';"></span>\n      </label>\n    </div>\n'])),"id","id","id","title","additional"),S=c.buildTemplate(h||(h=k(['\n   <div class="slider ','">\n     <h3 class="filters__text slider__header">','</h3>\n     <div class="slider__wrapper"></div>\n     <div class="slider__inputs">\n       <label class="input-number-label">\n         <span class="text">от</span>\n         <input type="number" class="input-number input-start">\n         <span class="text">','</span>\n       </label>\n       <span class="input-number__separator"></span>\n       <label class="input-number-label">\n         <span class="text">до</span>\n         <input type="number" class="input-number input-end">\n         <span class="text">',"</span>\n       </label>\n     </div>\n   </div>\n"],['\n   <div class="slider ','">\n     <h3 class="filters__text slider__header">','</h3>\n     <div class="slider__wrapper"></div>\n     <div class="slider__inputs">\n       <label class="input-number-label">\n         <span class="text">от</span>\n         <input type="number" class="input-number input-start">\n         <span class="text">','</span>\n       </label>\n       <span class="input-number__separator"></span>\n       <label class="input-number-label">\n         <span class="text">до</span>\n         <input type="number" class="input-number input-end">\n         <span class="text">',"</span>\n       </label>\n     </div>\n   </div>\n"])),"selector","title","unit","unit"),L=c.buildTemplate(f||(f=k(['\n<form class="filter__form" name="filter">\n  <div class="search">\n    <input class="input-text" type="text" name="query" id="query" minlength="3" placeholder="Поиск от 3 символов..." autocomplete="off" autofocus>\n    <button class="search__button" type="button" id="queryButton">\n    <svg class="search__icon" width="14" height="14" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7.99999 6.58578L14.2929 0.292893C14.6834 -0.0976313 15.3166 -0.0976307 15.7071 0.292894C16.0976 0.683418 16.0976 1.31658 15.7071 1.70711L9.41421 7.99999L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L7.99999 9.41421L1.70711 15.7071C1.31658 16.0976 0.683418 16.0976 0.292894 15.7071C-0.0976307 15.3166 -0.0976313 14.6834 0.292893 14.2929L6.58578 7.99999L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z"/>\n</svg>\n</button>\n  </div>\n  \n<div class="isPopular">\n  <input class="isPopular__input" type="checkbox" id="popular" name="popular">\n  <label class="isPopular__label" for="popular">\n    <div class="isPopular__wrapper"></div>\n    <span class="isPopular__text">Только популярные</span>\n  </label>\n</div>\n  \n  <div class="filters__sorting">\n  <h3 class="filters__text">Сортировка</h3>\n  <select class="sorting" name="sorting" id="sorting">\n    <option value="nameAsc">\n      <span>по наименованию &#8593;</span>\n    </option>\n    <option value="nameDesc">по наименованию &#8595;</option>\n    <option value="priceAsc">по цене &#8593;</option>\n    <option value="priceDesc">по цене &#8595;</option>\n    <option value="rating">по рейтингу</option>\n  </select>\n  </div>\n  \n  <fieldset class="checkbox" name="brandCheckbox">\n    <legend class="filters__text">Производитель</legend>\n    <div class="checkbox__wrapper">\n      ','\n    </div>\n  </fieldset>\n    \n    <fieldset class="checkbox" name="cleaningTypeCheckbox">\n      <legend class="filters__text">Тип уборки</legend>\n      <div class="checkbox__wrapper">\n        ','\n      </div>\n   </fieldset>\n    \n    <fieldset class="checkbox" name="colorCheckbox">\n      <legend class="filters__text">Цвет</legend>\n      <div class="checkbox__wrapper">\n        ',"\n      </div>\n    </fieldset>\n    \n    ","\n    \n    ",'\n    \n    <div class="filters__buttons">\n      <buttton class="button button_filters" id="buttonClean">Очистить</buttton>\n      <buttton class="button button_filters" id="buttonReset">Сбросить</buttton>\n    </div>\n</form>'],['\n<form class="filter__form" name="filter">\n  <div class="search">\n    <input class="input-text" type="text" name="query" id="query" minlength="3" placeholder="Поиск от 3 символов..." autocomplete="off" autofocus>\n    <button class="search__button" type="button" id="queryButton">\n    <svg class="search__icon" width="14" height="14" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7.99999 6.58578L14.2929 0.292893C14.6834 -0.0976313 15.3166 -0.0976307 15.7071 0.292894C16.0976 0.683418 16.0976 1.31658 15.7071 1.70711L9.41421 7.99999L15.7071 14.2929C16.0976 14.6834 16.0976 15.3166 15.7071 15.7071C15.3166 16.0976 14.6834 16.0976 14.2929 15.7071L7.99999 9.41421L1.70711 15.7071C1.31658 16.0976 0.683418 16.0976 0.292894 15.7071C-0.0976307 15.3166 -0.0976313 14.6834 0.292893 14.2929L6.58578 7.99999L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z"/>\n</svg>\n</button>\n  </div>\n  \n<div class="isPopular">\n  <input class="isPopular__input" type="checkbox" id="popular" name="popular">\n  <label class="isPopular__label" for="popular">\n    <div class="isPopular__wrapper"></div>\n    <span class="isPopular__text">Только популярные</span>\n  </label>\n</div>\n  \n  <div class="filters__sorting">\n  <h3 class="filters__text">Сортировка</h3>\n  <select class="sorting" name="sorting" id="sorting">\n    <option value="nameAsc">\n      <span>по наименованию &#8593;</span>\n    </option>\n    <option value="nameDesc">по наименованию &#8595;</option>\n    <option value="priceAsc">по цене &#8593;</option>\n    <option value="priceDesc">по цене &#8595;</option>\n    <option value="rating">по рейтингу</option>\n  </select>\n  </div>\n  \n  <fieldset class="checkbox" name="brandCheckbox">\n    <legend class="filters__text">Производитель</legend>\n    <div class="checkbox__wrapper">\n      ','\n    </div>\n  </fieldset>\n    \n    <fieldset class="checkbox" name="cleaningTypeCheckbox">\n      <legend class="filters__text">Тип уборки</legend>\n      <div class="checkbox__wrapper">\n        ','\n      </div>\n   </fieldset>\n    \n    <fieldset class="checkbox" name="colorCheckbox">\n      <legend class="filters__text">Цвет</legend>\n      <div class="checkbox__wrapper">\n        ',"\n      </div>\n    </fieldset>\n    \n    ","\n    \n    ",'\n    \n    <div class="filters__buttons">\n      <buttton class="button button_filters" id="buttonClean">Очистить</buttton>\n      <buttton class="button button_filters" id="buttonReset">Сбросить</buttton>\n    </div>\n</form>'])),"brandCheckbox","cleaningTypeCheckbox","colorCheckbox","sliderPrice","sliderSuctionPower"),E=n(344),P=n(571),T=n.n(P),q=function(){function e(e,t,n,i,s){this.value={query:"",sorting:a.Rating,brand:[],price:[],cleaningType:[],color:[],suctionPower:[],isPopular:!1},this.eventEmitter=new m,this.filterBrand=[],this.cleaningType=[],this.color=[],this.items=[],s&&(this.value=s),this.items=t,this.filterBrand=e,this.cleaningType=n,this.color=i}return e.prototype.render=function(e){var t=document.querySelector(e),n=c.buildElement(L({brandCheckbox:this.filterBrand.map((function(e){return w(e)})).join(""),cleaningTypeCheckbox:this.cleaningType.map((function(e){return w(e)})).join(""),colorCheckbox:this.color.map((function(e){return C(e)})).join(""),sliderPrice:S({selector:"price",title:"Цена",unit:"₽"}),sliderSuctionPower:S({selector:"suction-power",title:"Мощность всасывания",unit:"Вт"})}));t.prepend(n),this.filterChange();var i=document.forms.namedItem("filter").elements.namedItem("sorting");new(T())(i,{searchEnabled:!1,searchChoices:!1,itemSelectText:"",position:"auto",shouldSort:!1}).setChoiceByValue(this.value.sorting);var s=this.items.map((function(e){return e.price})),a=this.items.map((function(e){return e.suctionPower}));this.addRangeSlider(".price",s,"price",this.value.price),this.addRangeSlider(".suction-power",a,"suctionPower",this.value.suctionPower)},e.prototype.addRangeSlider=function(e,t,n,i){var s,a,r=this,o=document.querySelector(e),l=o.querySelector(".slider__wrapper"),c=o.querySelector(".input-start"),u=o.querySelector(".input-end"),d=[c,u],p=this.countMinValue(t),v=this.countMaxValue(t),h=(null==i?void 0:i.length)?i:[p,v];c.setAttribute("placeholder",p.toString()),u.setAttribute("placeholder",v.toString()),E.create(l,{start:h,connect:!0,tooltips:!0,padding:0,step:1,range:{min:p,max:v},format:{to:function(e){return Math.round(e)},from:function(e){return parseInt(e,10)}}}),null===(s=l.noUiSlider)||void 0===s||s.on("update",(function(e,t){d[t].value=e[t]}));var f=[p,v];d.forEach((function(e,t){e.addEventListener("input",(function(){!function(e,t){var n;f[e]=t,r.value.price=f,null===(n=l.noUiSlider)||void 0===n||n.set(f)}(t,+e.value)}))})),this.addListeners(),null===(a=l.noUiSlider)||void 0===a||a.on("change",(function(e){r.value[n]=e,r.filterChange()}))},e.prototype.addListeners=function(){var e,t=this,n=document.forms.namedItem("filter"),i=n.elements.namedItem("query");i.value=this.value.query,null==i||i.addEventListener("input",(function(e){var n=e.target;t.value.query!==n.value&&(t.value.query=n.validity.valid?n.value:"",t.filterChange())})),null===(e=null===document||void 0===document?void 0:document.querySelector("#queryButton"))||void 0===e||e.addEventListener("click",(function(){i.value="",t.value.query="",t.filterChange()}));var s=n.elements.namedItem("sorting");s.addEventListener("change",(function(){t.value.sorting=s.value,t.filterChange()}));var a=n.elements.namedItem("cleaningTypeCheckbox").elements,r=n.elements.namedItem("brandCheckbox").elements,o=n.elements.namedItem("colorCheckbox").elements,l=n.elements.namedItem("popular");this.addCheckboxListeners(r,"brand"),this.addCheckboxListeners(a,"cleaningType"),this.addCheckboxListeners(o,"color"),l.toggleAttribute("checked",this.value.isPopular),l.addEventListener("change",(function(){t.value.isPopular=l.checked,t.filterChange()}));var c=document.querySelector("#buttonClean"),u=document.querySelector("#buttonReset");c.addEventListener("click",(function(){t.cleanFilters()})),u.addEventListener("click",(function(){t.reset(),t.cleanFilters()}))},e.prototype.cleanFilters=function(){var e=document.forms.namedItem("filter"),t=e.elements.namedItem("brandCheckbox").elements,n=e.elements.namedItem("cleaningTypeCheckbox").elements,i=e.elements.namedItem("colorCheckbox").elements,s=e.elements.namedItem("popular"),a=this.items.map((function(e){return e.price})),r=this.items.map((function(e){return e.suctionPower})),o=document.querySelectorAll(".slider__wrapper");this.value.brand=[],this.value.cleaningType=[],this.value.color=[],this.value.isPopular=!1,this.value.price=[this.countMinValue(a),this.countMaxValue(a)],this.value.suctionPower=[this.countMinValue(r),this.countMaxValue(r)],s.checked=!1,this.resetCheckboxGroup(t),this.resetCheckboxGroup(n),this.resetCheckboxGroup(i),o.forEach((function(e){var t,n,i,s=null===(t=e.noUiSlider)||void 0===t?void 0:t.options.range.min,a=null===(n=e.noUiSlider)||void 0===n?void 0:n.options.range.max;s&&a&&(null===(i=e.noUiSlider)||void 0===i||i.set([s,a]))})),this.filterChange()},e.prototype.reset=function(){document.forms.namedItem("filter").elements.namedItem("query").value="",this.value.query="",this.value.sorting=a.Rating,localStorage.clear(),this.eventEmitter.emit("reset",{})},e.prototype.countMinValue=function(e){return Math.min.apply(Math,e)},e.prototype.countMaxValue=function(e){return Math.max.apply(Math,e)},e.prototype.resetCheckboxGroup=function(e){Array.from(e).forEach((function(e){e.checked=!1}))},e.prototype.addCheckboxListeners=function(e,t){var n=this;Array.from(e).forEach((function(e){e.toggleAttribute("checked",n.value[t].includes(+e.id)),e.addEventListener("change",(function(){var i=new Set(n.value[t]);e.checked?i.add(+e.id):i.delete(+e.id),n.value[t]=Array.from(i),n.filterChange()}))}))},e.prototype.filterChange=function(){this.eventEmitter.emit("filterChange",this.value),localStorage.setItem("filterValue",JSON.stringify(this.value))},e}();new(function(){function e(){this.eventEmitter=new m,this.loader=new l,this.start()}return e.prototype.start=function(){var e=this,t=JSON.parse(localStorage.getItem("filterValue")||"null");this.loader.load("./source/items.json",(function(n){e.loader.load("./source/brands.json",(function(i){e.loader.load("./source/cleaningType.json",(function(s){e.loader.load("./source/colors.json",(function(a){e.filter=new q(i,n,s,a,t),e.catalog=new y(n),e.render()}))}))}))}))},e.prototype.render=function(){var e,t;null===(e=this.catalog)||void 0===e||e.render(".catalog"),null===(t=this.filter)||void 0===t||t.render(".filters")},e}())}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,n,s,a)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,s,a]=e[u],o=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(o=!1,a<r&&(r=a));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,a,[r,o,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var u=l(i)}for(t&&t(n);c<r.length;c++)a=r[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[478],(()=>i(446)));s=i.O(s)})();